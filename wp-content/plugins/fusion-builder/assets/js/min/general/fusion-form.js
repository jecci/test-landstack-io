window.fusionForms={onLoad:function(){var e=jQuery("body").hasClass("fusion-builder-live");setTimeout(function(){window.fusionForms.calcSelectArrowDimensions()},100),window.fusionForms.calcTooltipWidth(),e||jQuery("#fusion-form-preview").length||jQuery("body").hasClass("awb-generating-critical-css")||jQuery.each(jQuery(".fusion-form-builder"),function(e,t){var i=jQuery(this).data("config");"ajax"!==i.form_views&&void 0!==i.nonce_method&&"ajax"!==i.nonce_method||window.fusionForms.ajaxUpdateView(this)}),document.querySelectorAll(".fusion-form-input").forEach(e=>{null===e.getAttribute("data-empty-notice")&&null===e.getAttribute("data-invalid-notice")||(e.addEventListener("input",()=>{e.setCustomValidity(""),e.checkValidity()}),e.addEventListener("invalid",()=>(window.fusionForms.checkIfEmpty(e)&&null!==e.getAttribute("data-empty-notice")?e.setCustomValidity(e.getAttribute("data-empty-notice")):null!==e.getAttribute("data-invalid-notice")&&e.setCustomValidity(e.getAttribute("data-invalid-notice")),!1)),e.addEventListener("change",()=>{"radio"!==e.type&&"checkbox"!==e.type||document.querySelectorAll('input[name="'+e.name+'"]').forEach(e=>{e.setCustomValidity("")})}))})},onReady:function(){formCreatorConfig.post_id="undefined"!=typeof fusion&&"function"==typeof fusion.getCurrentPostID?fusion.getCurrentPostID():0,window.fusionForms.startFlatpickr(),jQuery(".fusion-form-range-field-container").on("change input",function(e){var t=jQuery(e.target),i=parseInt(t.attr("max")),a=parseInt(t.attr("min")),r=parseInt(t.val()),o=t.hasClass("fusion-form-range-value")?".fusion-form-input":".fusion-form-range-value";(r<a||r>i)&&(r=r<a?a:i,t.val(r)),t.siblings(o).val(r)}),jQuery('.form-form-submit, a[href="#nextStep"]').on("click",function(e){window.fusionForms.hiddenFields(e,this),window.fusionForms.submitClick(e,this)}),jQuery("form.fusion-form").on("submit",function(e){window.fusionForms.submitForm(e,this)}),jQuery('a[href="#previousStep"]').on("click",function(e){window.fusionForms.applyStep(e,jQuery(this))}),jQuery("body").on("click",".fusion-alert .close",function(e){e.preventDefault(),jQuery(this).parent().slideUp()}),jQuery(".fusion-form-field input, .fusion-form-field textarea").on("blur",function(){var e=jQuery(this).closest(".fusion-form-field");jQuery(this).attr("data-must-match")&&window.fusionForms.checkFieldMatches(jQuery(this)),e.hasClass("error")&&this.checkValidity()&&e.removeClass("error")}),jQuery(".awb-form-pw-reveal-icon").on("click",function(e){e.preventDefault();const t=jQuery(this).prev(),i="password"===t.attr("type")?"text":"password";t.attr("type",i),"text"===i?jQuery(this).removeClass("awb-icon-eye-slash").addClass("awb-icon-eye"):jQuery(this).removeClass("awb-icon-eye").addClass("awb-icon-eye-slash")}),jQuery(".fusion-form-upload-field-button").on("click",function(e){e.preventDefault(),jQuery(this).closest(".fusion-form-upload-field-container").find('input[type="file"]').trigger("click")}),jQuery('.fusion-form-upload-field-container input[type="file"]').on("change",function(e){e.target.files.length&&window.fusionForms.fileUploadChange(this)}),jQuery("body").on("click",".awb-upload-remove",function(e){e.preventDefault(),window.fusionForms.fileUploadRemove(this)}),jQuery(".fusion-form-upload-field").on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){jQuery(this).addClass("focused")}).on("dragleave dragend drop",function(){jQuery(this).removeClass("focused")}).on("drop",function(e){var t=e.originalEvent.dataTransfer.files;jQuery(this).find('input[type="file"]').prop("files",t).trigger("change")}),jQuery('button[type="reset"]').on("click",function(e){window.fusionForms.handleResetClick(e,this)}),jQuery(".fusion-form-form-wrapper").each(function(){window.fusionForms.loadFormDataFromLocalStorage(jQuery(this))}),jQuery(".fusion-form-form-wrapper").on("reset",function(){window.fusionForms.clearFormDataFromLocalStorage(jQuery(this))}),jQuery("body").on("click",".form-form-save-data",function(e){e.preventDefault();const t=jQuery(this),i=t.closest(".fusion-form-form-wrapper");i.length&&(window.fusionForms.saveFormDataToLocalStorage(i),t.addClass("fusion-form-working"),setTimeout(function(){t.removeClass("fusion-form-working")},750))}),jQuery(".fusion-form-password-field .awb-pw-strength").on("keyup",function(){var e=jQuery(this).val(),t=jQuery(this).closest(".fusion-form-password-field").find(".pass-strength-result");if(t.removeClass("short bad good strong empty"),e&&""!==e.trim())switch(wp.passwordStrength.meter(e,wp.passwordStrength.userInputDisallowedList(),e)){case-1:t.addClass("bad").html(pwsL10n.unknown);break;case 2:t.addClass("bad").html(pwsL10n.bad);break;case 3:t.addClass("good").html(pwsL10n.good);break;case 4:t.addClass("strong").html(pwsL10n.strong);break;default:t.addClass("short").html(pwsL10n.short)}else t.addClass("empty").html("&nbsp;")})},applyStep:function(e,t){var i,a=t.closest(".fusion-form"),r=a.find(".awb-form-step.active");if(e.preventDefault(),void 0!==t.attr("href")&&r.length&&"#previousStep"===t.attr("href")&&r.prev().hasClass("awb-form-step")&&(r.removeClass("active").hide().prev().fadeIn(300).addClass("active"),i=parseInt(a.find(".awb-form-step.active").data("step")),this.manageFormNavActiveStep(a,i),"function"==typeof window.awbScrollToTarget)){const e=a.prev().hasClass("awb-form-nav--above")?a.prev():a.find(".awb-form-step.active");this.withinViewport(e)||window.awbScrollToTarget(e,10)}},goToStep:function(e,t){const i=e.find(".awb-form-step.active"),a=e.find('.awb-form-step[data-step="'+t+'"]');if(i.length&&a.length&&i!==a&&(i.removeClass("active").hide(),a.fadeIn(300).addClass("active"),this.manageFormNavActiveStep(e,t),"function"==typeof window.awbScrollToTarget)){const t=e.prev().hasClass("awb-form-nav--above")?e.prev():e.find(".awb-form-step.active");this.withinViewport(t)||window.awbScrollToTarget(t,10)}},checkIfEmpty:function(e){var t=!1;switch(e.type){case"radio":case"checkbox":t=null===document.querySelector('input[name="'+e.name+'"]:checked');break;default:t=""===e.value}return t},startFlatpickr:function(){jQuery('.fusion-form-field input[type="date"]').each(function(){var e=jQuery(this),t=e.attr("data-type"),i=e.attr("data-format"),a=e.attr("data-disabled-days"),r="custom"===t,o=e.attr("data-first-day"),n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function s(e,t){let i=flatpickr.parseDate(e,"Y-m-d");return i?flatpickr.formatDate(i,t):""}"native"!==t&&(i=void 0===i||""===i?"Y-m-d":i,(a=(a=void 0===a||""===a?"":a).split(",")).length&&(a=a.map(function(e){return n.indexOf(e)})),e.flatpickr({allowInput:!0,disableMobile:r,dateFormat:i,minDate:s(e.attr("min"),i),maxDate:s(e.attr("max"),i),disable:[function(e){return a.includes(e.getDay())}],locale:{firstDayOfWeek:o}}))}),jQuery('.fusion-form-field input[type="time"]').each(function(){var e=jQuery(this),t=e.attr("data-type"),i="custom"===t,a="full"===e.attr("data-clock");"native"!==t&&e.flatpickr({allowInput:!0,disableMobile:i,enableTime:!0,noCalendar:!0,dateFormat:a?"H:i":"h:i K",time_24hr:a})})},renderRecaptcha:function(){var e;jQuery.each(jQuery(".fusion-form-recaptcha-v2"),function(t,i){e=jQuery(this).attr("id"),grecaptcha.render(e,{sitekey:jQuery(this).data("sitekey"),type:jQuery(this).data("type"),theme:jQuery(this).data("theme")})})},calcTooltipWidth:function(){jQuery.each(jQuery(".fusion-form-tooltip-content"),function(e,t){var i;jQuery(t).closest(".fusion-form-tooltip").css({position:"inherit"}),i=jQuery(t).width()+23,jQuery(t).css({width:i+"px"}),jQuery(t).closest(".fusion-form-tooltip").removeAttr("style")})},calcSelectArrowDimensions:function(){jQuery(".fusion-form-select-wrapper .select-arrow").filter(":visible").each(function(){0<jQuery(this).prev().innerHeight()&&jQuery(this).css({height:jQuery(this).prev().innerHeight(),width:jQuery(this).prev().innerHeight(),"line-height":jQuery(this).prev().innerHeight()+"px"})})},withinViewport:function(e){var t=e.offset().top,i=jQuery(window).scrollTop(),a=i+jQuery(window).height();return t>i&&t<a},submitClick:function(e,t){var i,a,r=jQuery(t).closest("form.fusion-form"),o=jQuery(t).data("form-number"),n=[];void 0===o&&jQuery(t).closest(".fusion-form").length&&(o=parseInt(jQuery(t).closest(".fusion-form-form-wrapper").data("form-id"))),"post"!==(i=jQuery(".fusion-form-form-wrapper.fusion-form-"+o).data("config")).form_type&&(e.preventDefault(),r.find('[data-holds-private-data="true"]').each(function(e,t){n.push(t.name)}),r.find('[name="fusion-fields-hold-private-data"]').length||r.append('<input type="hidden" name="fusion-fields-hold-private-data" value="'+n.join(",")+'">'),setTimeout(function(){a=new CustomEvent("fusion-form-before-submit",{detail:{event:e,form:r,formConfig:i}}),window.dispatchEvent(a),r.trigger("submit")},50))},hiddenFields:function(e,t){var i=jQuery(t).closest("form.fusion-form");i.find(".fusion-form-field-hidden").find("input, textarea, select").filter("[required]").attr("required",!1).attr("data-required",!0),i.find(".awb-form-step.active").nextAll(".awb-form-step").find("[required]").attr("required",!1).attr("data-required",!0),i.find(".awb-form-step.active").find(".fusion-form-field:not(.fusion-form-field-hidden)").find("[data-required]").filter(function(){return 0===jQuery(this).closest(".fusion-form-field-hidden").length}).attr("required",!0).removeAttr("data-required")},submitForm:function(e,t){var i,a=jQuery(t),r=a,o=r.find(".form-form-submit"),n=o.data("form-number"),s=r.find('[data-fusion-is-honeypot="true"]'),f=r.find("[data-awb-fieldset-min-required], [data-awb-fieldset-max-required]"),l=r.find("[data-must-match]");if("unset"!==o.attr("data-captcha-token"))if(window.fusionForms.checkUploadFields(r)){if(void 0===n&&jQuery(t).closest(".fusion-form").length&&(n=parseInt(jQuery(t).closest(".fusion-form-form-wrapper").data("form-id"))),"post"!==(i=jQuery(".fusion-form-form-wrapper.fusion-form-"+n).data("config")).form_type){if(e.preventDefault(),r.find(".fusion-form-field.error").removeClass("error"),f.each(function(e,t){window.fusionForms.checkCustomRequiredCheckboxNum(jQuery(t))||window.fusionForms.insertCustomRequiredCheckboxMessage(jQuery(t))}),l.each(function(e,t){window.fusionForms.checkFieldMatches(jQuery(t))}),!a[0].checkValidity())return a[0].reportValidity(),void r.find("input:invalid, select:invalid, textarea:invalid").each(function(){jQuery(this).closest(".fusion-form-field").addClass("error")});if((s=s.filter(function(e,t){return!!jQuery(t).val()})).length)this.revealAlert(r,{status:"error"});else if(0==r.find(".error:not(.fusion-alert)").length)if(a.find(".awb-form-step.active").length&&!a.find(".awb-form-step.active").is('[data-final="1"]')){if(a.find(".awb-form-step.active").removeClass("active").hide().next().fadeIn(300).addClass("active"),this.manageFormNavActiveStep(a,parseInt(a.find(".awb-form-step.active").attr("data-step"))),"function"==typeof window.awbScrollToTarget){const e=a.prev().hasClass("awb-form-nav--above")?a.prev():a.find(".awb-form-step.active");this.withinViewport(e)||window.awbScrollToTarget(e,10)}}else window.fusionForms.ajaxSubmit(r,i)}}else e.preventDefault();else e.preventDefault()},checkUploadFields(e){let t=!0;return e.find(".fusion-form-field.fusion-form-upload-field").each(function(){const e=jQuery(this).find('[type="file"]'),i=(e.prop("required"),parseInt(e.data("min-upload-files"))),a=parseInt(e.data("max-upload-files")),r=e.data("files")||e[0].files,o=r.length;return!r||0===o||(0!==i&&o<i||0!==a&&o>a||0!==a&&i===a&&o!==a?(t=!1,!1):void 0)}),t},manageFormNavActiveStep(e,t){var i,a,r,o,n,s,f,l,d,u=jQuery(e).parent().find(".awb-form-nav"),c=u.hasClass("awb-form-nav--timeline"),m="awb-form-nav__tl-step-wrapper--active",p="awb-form-nav__tl-step-wrapper--completed",w=u.hasClass("awb-form-nav--progress");c?(i=u.find(".awb-form-nav__tl-step-wrapper"),a=u.attr("data-aria-current"),r=u.attr("data-aria-completed"),i.each(function(){var e=jQuery(this),i=parseInt(e.attr("data-step"));i<t?(e.addClass(p).removeClass(m),e.find(".awb-form-nav__tl-aria-info").html(r)):i===t?(e.addClass(m).removeClass(p),e.find(".awb-form-nav__tl-aria-info").html(a)):(e.removeClass(m).removeClass(p),e.find(".awb-form-nav__tl-aria-info").html(""))})):w&&(o=0<(o=parseInt(u.attr("data-steps")))?o:1,d=Math.round(100*t/o),u.find(".progress-bar-content").css("width",d+"%"),void 0!==(n=u.find(".fusion-progressbar-value"))&&n.length&&n.html(n.html().replace(parseInt(n.html()),d)),u.find(".progress-bar-content").attr("aria-valuenow",d),(s=u.find(".progress-title")).attr("style")&&(l=s.attr("style").match(/((?:right|left):\s*calc\s*\(.*?\s*[+\-*\/%]\s*)\d*(%\s*\)\s*;)/i))&&l.length&&(f=l[1]+(100-d)+l[2],s.attr("style",s.attr("style").replace(l[0],f)))),setTimeout(function(){jQuery(window).trigger("fusion-dynamic-content-render",jQuery('.awb-form-step[data-step="'+t+'"]')),window.dispatchEvent(new Event("fusion-resize-horizontal",{bubbles:!0,cancelable:!0})),jQuery(window).trigger("fusion-resize-vertical"),jQuery(window).trigger("resize")},350)},getFormData:function(e,t){var i,a,r=new FormData,o=e.find('input[type="file"]'),n=e.serializeArray(),s=e.parent().data("form-id"),f=[];for(o.length&&o.each(function(){var e=jQuery(this).attr("name").replace("[]",""),t=void 0!==jQuery(this).data("files")?jQuery(this).data("files"):this.files,i=t.length;jQuery.each(t,function(t,a){1<i?r.append("files["+e+"@|@"+(t+1)+"]",a):r.append("files["+e+"]",a)})}),jQuery.each(e.find(".fusion-form-field-hidden input:not(.fusion-form-range-value):not(.fusion-form-upload-field), .fusion-form-field-hidden textarea, .fusion-form-field-hidden select, .fusion-form-honeypot-field input"),function(){var e=jQuery(this).attr("name");e&&(e=e.replace("[]",""),-1===f.indexOf(e)&&f.push(e))}),i=0,a=n.length;i<a;i++)n[i].value=jQuery.trim(n[i].value);return r.append("formData",jQuery.param(n)),r.append("action","fusion_form_submit_ajax"),r.append("fusion_form_nonce",e.find("#fusion-form-nonce-"+s).val()),r.append("form_id",t.form_id),r.append("post_id",t.post_id),r.append("field_labels",JSON.stringify(t.field_labels)),r.append("field_types",JSON.stringify(t.field_types)),r.append("hidden_field_names",JSON.stringify(f)),e.find(".fusion-form-recaptcha-v2").length&&r.append("g-recaptcha-response",e.find(".g-recaptcha-response").val()),e.find(".fusion-form-recaptcha-v3").length&&r.append("g-recaptcha-response",e.find(".g-recaptcha-response").val()),e.find(".awb-forms-turnstile").length&&r.append("cf-turnstile-response",e.find('[name^="cf-turnstile-response"]').val()),"url"===t.form_type&&(r.append("fusionAction",e.attr("action")),r.append("fusionActionMethod",e.attr("method"))),r},ajaxSubmit:function(e,t){var i=this,a=window.fusionForms.getFormData(e,t);e.find(".form-form-submit").addClass("fusion-form-working"),jQuery.ajax({type:"POST",url:formCreatorConfig.ajaxurl,data:a,action:"fusion_form_submit_ajax",dataType:"json",processData:!1,contentType:!1}).done(function(r){if(r.captcha||"success"!=r.status||(jQuery(e)[0].reset(),jQuery(e).find(".awb-upload-placeholder").each(function(){jQuery(this).html(jQuery(this).data("default"))}),jQuery(e).find(".awb-uploads-preview").css("margin-top",""),jQuery(e).find(".awb-preview-filenames, .awb-preview-list, .awb-preview-thumbs").empty()),"string"==typeof t.confirmation_type&&(t.confirmation_type=[t.confirmation_type]),t.confirmation_type.includes("message")&&i.revealAlert(e,r),"success"==r.status){const e=new URLSearchParams(a.get("formData"));if(e.get("redirect_to")){const t=e.get("redirect_ttimeout")?e.get("redirect_ttimeout"):0;setTimeout(function(){window.location=e.get("redirect_to")},parseInt(t))}else t.confirmation_type.includes("redirect")&&""!==t.redirect_url&&setTimeout(function(){window.location=t.redirect_url},parseInt(t.redirect_timeout)||0)}if(jQuery(window).trigger("fusion-form-ajax-submit-done",{result:r,formConfig:t,data:a}),"success"==r.status){const t=e.parent(".fusion-form").data("off-canvas");t&&window.awbOffCanvas.open_off_canvas(t)}}).fail(function(){i.revealAlert(e,{status:"error"}),jQuery(window).trigger("fusion-form-ajax-submit-fail",{formConfig:t})}).always(function(){e.find(".form-form-submit").removeClass("fusion-form-working"),window.fusionForms.reloadCaptcha(e),jQuery(window).trigger("fusion-form-ajax-submitted",{formConfig:t,data:a})})},reloadCaptcha:function(e){var t=jQuery(e).closest("form.fusion-form"),i=t.find("div.recaptcha-container").attr("id");void 0!==i&&"undefined"!=typeof active_captcha&&void 0!==active_captcha[i]&&grecaptcha.execute(active_captcha[i],{action:"contact_form"}).then(function(e){t.find("div.recaptcha-container").find(".g-recaptcha-response").val(e)})},revealAlert:function(e,t){var i,a=e.find(".form-submission-notices").not(".fusion-form-notice-hidden"),r="object"==typeof t&&void 0!==t.status?t.status:"error",o=a.find(" > .fusion-form-response-"+r);if(e.find(".awb-form-step").length&&(e.find(".form-submission-notices").length&&!e.find(".form-submission-notices").closest(".awb-form-step").hasClass("active")?(e.find(".awb-form-step.active").removeClass("active").hide(),(i=e.find(".form-submission-notices").closest(".awb-form-step")).addClass("active").fadeIn(300),this.withinViewport(i)||"function"!=typeof window.awbScrollToTarget||window.awbScrollToTarget(i),this.manageFormNavActiveStep(e,parseInt(i.data("step")))):e.find(".form-submission-notices").length||(e.find(".awb-form-step.active").removeClass("active").hide(),e.find('.awb-form-step[data-step="1"]').addClass("active").fadeIn(300),this.withinViewport(e.find(".awb-form-step.active"))||"function"!=typeof window.awbScrollToTarget||window.awbScrollToTarget(e.find(".awb-form-step.active")),this.manageFormNavActiveStep(e,1))),e.find(".form-submission-notices").find(".fusion-form-response").hide(),"object"==typeof t&&"object"==typeof t.info){const e=o.find(".fusion-alert-content .messages-wrap");e.length?e.empty():o.find(".fusion-alert-content").append('<span class="messages-wrap"></span>'),jQuery.each(t.info,function(e,t){o.find(".fusion-alert-content .messages-wrap").append("<br><br>"+t)})}o.length&&(this.withinViewport(a)||"function"!=typeof window.awbScrollToTarget?(o.attr("role","alert"),o.slideDown(300)):(o.attr("role","alert"),o.css({display:"block"}),window.awbScrollToTarget(a)))},ajaxUpdateView:function(e){jQuery.ajax({type:"POST",url:formCreatorConfig.ajaxurl,data:{action:"fusion_form_update_view",form_id:jQuery(e).data("form-id"),form_views:jQuery(e).data("config").form_views,form_views_counting:jQuery(e).data("config").form_views_counting,nonce_method:jQuery(e).data("config").nonce_method},success:function(t){jQuery(e).find(".fusion-form").append(t)},dataType:"html"})},fileUploadChange:function(e){var t=jQuery(e),i=t.closest(".fusion-form-upload-field"),a=i.find(".awb-upload-placeholder"),r=i.find(".awb-uploads-preview"),o=t.attr("accept"),n=[...t.data("files")||[]];if(newFiles=jQuery(e).prop("files"),numberOfFiles=n.length,maxSize=t.data("size"),minFiles=parseInt(t.data("min-upload-files")),maxFiles=parseInt(t.data("max-upload-files")),previewType=t.data("uploads-preview"),singleAddRemove=t.data("single-add-remove"),emptyPreview=!1,i.removeClass("error"),a.html(a.data("default")),"yes"!==singleAddRemove&&(r.children().empty(),r.css("margin-top",""),emptyPreview=!0),0!==maxFiles&&maxFiles<=numberOfFiles)window.fusionForms.fileUploadError("max_files",i,formCreatorConfig.max_files_error+maxFiles,emptyPreview);else{if(0<newFiles.length){let e="";jQuery.each(newFiles,function(t,a){var s,f=a.name.split("\\").pop(),l=(a.size/1024).toFixed(2),d=(a.size/1024/1024).toFixed(4),u=a.type.split("/"),c=a.name.match(/\.([^\.]+)$/)[1].toLowerCase(),m="";if(void 0!==o&&!o.toLowerCase().includes(u[0]+"/")&&!o.toLowerCase().includes(c))return window.fusionForms.fileUploadError("file_type",i,formCreatorConfig.file_ext_error+o,emptyPreview),!1;if("undefined"!=typeof maxSize&&d>maxSize)return window.fusionForms.fileUploadError("file_size",i,formCreatorConfig.file_size_error+maxSize+"MB",emptyPreview),!1;if(0!==maxFiles&&maxFiles<=n.length)return window.fusionForms.fileUploadError("max_files",i,formCreatorConfig.max_files_error+maxFiles,emptyPreview),!1;if(s=n.push(a)-1,"yes"===singleAddRemove&&(m=`<button class="awb-upload-remove awb-icon-close" data-index="${s}" title="${formCreatorConfig.upload_remove}"></button>`),"simple"===previewType)e=i.find(".awb-preview-filenames").html()+`<strong data-index="${s}">${f} (${m})<span>, </span></strong>`,r.find(".awb-preview-filenames").html(e);else if("list"===previewType)r.find(".awb-preview-list").append(`<li data-index="${s}"><strong>${f}</strong> (${a.type||"n/a"}) - ${l} KB${m}</li>`);else{const e=a.type.match("image.*")?"image":"file";let t="image"===e?`<div class="awb-preview-image" data-index="${s}"><img src="${URL.createObjectURL(a)}" alt="${f}">`:`<div class="awb-preview-file" data-index="${s}"><i class="awb-icon-file"></i>`;if(t+=m,"thumbnails_detailes"===previewType?t+=`<span class="awb-file-type">${c}</span><span class="awb-file-name">${f}</span><span>${l} KB</span`:"file"===e&&(t+=`<span class="awb-file-type">${c}</span><span class="awb-file-name">${f}</span>`),t+="</div>",r.find(".awb-preview-thumbs").append(t),"image"===u){let e=r.find(".awb-preview-thumbs").find('[data-index="'+s+'"] img'),t=e.attr("src");e.on("load",function(){URL.revokeObjectURL(t)})}}})}numberOfFiles=n.length,0!==maxFiles&&maxFiles<numberOfFiles?window.fusionForms.fileUploadError("max_files",i,formCreatorConfig.max_files_error+maxFiles,emptyPreview):0!==maxFiles&&minFiles===maxFiles&&maxFiles!==numberOfFiles&&window.fusionForms.fileUploadError("exact_files",i,formCreatorConfig.exact_files_upload+maxFiles,emptyPreview),"yes"===singleAddRemove&&t.data("files",n),0!==minFiles&&minFiles>numberOfFiles&&window.fusionForms.fileUploadError("min_files",i,formCreatorConfig.min_files_error+minFiles,emptyPreview),r.css("margin-top","20px"),t.closest(".fusion-form-upload-field-container").find(".fusion-form-upload-field").trigger("change")}},fileUploadRemove:function(e){const t=parseInt(jQuery(e).attr("data-index")),i=jQuery(e).closest(".fusion-form-field"),a=jQuery(e).closest(".fusion-form-upload-field-container"),r=a.find(".awb-upload-placeholder"),o=a.find(".awb-uploads-preview"),n=a.find('input[type="file"]'),s=[...n.data("files")||[]];let f=0,l=0,d=0;0<s.length&&(i.removeClass("error"),r.html(r.data("default")),f=s.length-1,l=parseInt(n.data("min-upload-files")),d=parseInt(n.data("max-upload-files")),s.splice(t,1),n.data("files",s),o.find('[data-index="'+t+'"]').remove(),a.find("[data-index]").each(function(){const e=parseInt(jQuery(this).attr("data-index"));t<e&&jQuery(this).attr("data-index",e-1)}),0!==d&&d<f?window.fusionForms.fileUploadError("max_files",a,formCreatorConfig.max_files_error+d,!1):0!==d&&l===d&&d!==f&&0!==f?window.fusionForms.fileUploadError("exact_files",a,formCreatorConfig.exact_files_upload+d,!1):0!==l&&l>f&&0!==f&&window.fusionForms.fileUploadError("min_files",a,formCreatorConfig.min_files_error+l,!1),0===f&&i.find(".awb-uploads-preview").css("margin-top",""))},fileUploadError:function(e="default",t,i,a=!0){const r=t.hasClass("fusion-form-upload-field")?t:t.closest(".fusion-form-upload-field"),o=r.find(".awb-upload-placeholder"),n=e.replace("_","-"),s='<span class="'+n+'">'+i+"</span>";r.addClass("error"),o.html()===o.data("default")?o.html(s):"exact-files"===n&&(o.children().hasClass("min-files")||o.children().hasClass("max-files"))?(o.children(".min-files, .max-files").remove(),o.html(o.html()+s)):("min-files"!==n&&"max-files"!==n||!o.children().hasClass("exact-files"))&&(o.children().hasClass(n)||o.html(o.html()+s)),a&&(r.find(".awb-uploads-preview").css("margin-top",""),r.find(".awb-preview-filenames, .awb-preview-list, .awb-preview-thumbs").empty(),r.find('input[type="file"]').val(""))},handleResetClick:function(e,t){const i=jQuery(t);if(i.hasClass("form-form-reset-step")){e.preventDefault();const t=i.closest(".awb-form-step");t.find(".fusion-form-field.error").removeClass("error"),setTimeout(function(){t.find("input:not([type=button]):not([type=submit]):not([type=reset]), textarea, select").each(function(){const e=jQuery(this);if(e.is(":checkbox")||e.is(":radio"))e.prop("checked",!1);else if(e.is("[type=file]")){const t=e.closest(".fusion-form-upload-field-container"),i=t.find(".awb-upload-placeholder");e.val(""),e.removeData("files"),i.html(i.data("default")),t.find(".awb-uploads-preview").css("margin-top",""),t.find(".awb-preview-filenames, .awb-preview-list, .awb-preview-thumbs").empty()}else e.val("")})},10)}else{const e=i.closest("form");setTimeout(function(){e.find("input:not([type=button]):not([type=submit]):not([type=reset]), textarea, select").trigger("change")},10),e.find(".fusion-form-field.error").removeClass("error"),e.find(".fusion-form-upload-field.fusion-form-field").each(function(){const e=jQuery(this).find(".awb-upload-placeholder");e.html(e.data("default")),jQuery(this).find('input[type="file"]').removeData("files"),jQuery(this).find(".awb-uploads-preview").css("margin-top",""),jQuery(this).find(".awb-preview-filenames, .awb-preview-list, .awb-preview-thumbs").empty()}),e.children(".awb-form-step").length&&window.fusionForms.goToStep(e,1)}},getFormKey:function(e){return"awb_form_data_"+(jQuery("body").data("awb-post-id")||"0")+"_"+(e.data("form-id")||"0")},saveFormDataToLocalStorage:function(e){let t={};e.find("input, textarea, select").each(function(){const e=jQuery(this),i=e.attr("name"),a=e.attr("id");if(!e.hasClass("g-recaptcha-response")&&!e.hasClass("awb-forms-turnstile")&&i)if(e.is(":checkbox"))t[a]=e.is(":checked");else if(e.is(":radio"))e.is(":checked")&&(-1!==a.indexOf("image-select")?t[a]=e.val():t[i]=e.val());else if(e.is("[type=file]")){const a=e.data("files")||e[0].files;a&&0<a.length&&(t[i]=Array.from(a).map(e=>e.name))}else t[i]=e.val()}),t.saved_at=(new Date).toISOString(),localStorage.setItem(window.fusionForms.getFormKey(e),JSON.stringify(t))},loadFormDataFromLocalStorage:function(e){const t=localStorage.getItem(window.fusionForms.getFormKey(e));if(!t)return;const i=JSON.parse(t);e.find("input, textarea, select").each(function(){const e=jQuery(this),t=e.attr("name"),a=e.attr("id");if(t&&(t in i||a in i))if(e.is(":checkbox"))e.prop("checked",!!i[e.attr("id")]);else if(e.is(":radio"))-1!==a.indexOf("image-select")?e.prop("checked",e.val()===i[a]):e.prop("checked",e.val()===i[t]);else if(e.is("[type=range]"))e.prev().val(i[t]),e.val(i[t]);else if(e.is("[type=file]")){if(i[t]&&i[t].length){e.closest(".fusion-form-upload-field-container").find(".awb-upload-placeholder").html('<span class="awb-load-upload-names" style="color: #e0284f;">'+formCreatorConfig.previously_uploaded+" "+i[t].join(", ")+"</span>")}}else e.val(i[t])})},clearFormDataFromLocalStorage:function(e){localStorage.removeItem(window.fusionForms.getFormKey(e))},checkFieldMatches:function(e){var t=e.val(),i=e.attr("data-must-match"),a=e.closest(".fusion-form-form-wrapper"),r=a.data("config"),o=a.find('input[name="'+i+'"]'),n=!!o.length&&o.val(),s="string"==typeof r.field_labels[i]&&""!==r.field_labels[i]&&r.field_labels[i];return s||(s="string"==typeof o.attr("placeholder")&&""!==o.attr("placeholder")?o.attr("placeholder").replace("*",""):i),o.length?e.is(":hidden")?e[0].setCustomValidity(""):void(t===n?e[0].setCustomValidity(""):e[0].setCustomValidity(formCreatorConfig.must_match.replace("%s",s))):e[0].setCustomValidity("")},checkCustomRequiredCheckboxNum:function(e){var t=e.attr("data-awb-fieldset-min-required"),i=e.attr("data-awb-fieldset-max-required"),a=e.find("input"),r=e.find("input:checked").length,o=a.first();return isNaN(t)&&(t=0),isNaN(i)&&(i=0),(o=o.get(0))&&o.nodeType&&o.setCustomValidity(""),!!e.is(":hidden")||r>=t&&(r<=i||0===parseInt(i))},insertCustomRequiredCheckboxMessage:function(e){var t=e.find("input").first(),i=e.attr("data-awb-fieldset-error");t.length&&(t=t.get(0))&&t.nodeType&&t.setCustomValidity(i)}},function(e){e(window).on("load",function(){window.fusionForms.onLoad()}),e(document).ready(function(){window.fusionForms.onReady()}),e(window).on("fusion-element-render-fusion_form",function(){window.fusionForms.startFlatpickr()})}(jQuery);